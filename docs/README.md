# CRM для школ [![Dependabot Status](https://api.dependabot.com/badges/status?host=github&repo=asm0dey/school-crm)](https://dependabot.com)

## Цель

Этот проект предназначен для школ, которые испытывают потребность в том, чтобы коммуницировать с родителями своих учеников.

## Возможности

1. Открытая регистрация учеников
1. Перевод учеников между классами
1. Автоматический сдвиг классов (происходит ночью 31 августа)
1. Автоматическое удаление классов, которые стали неактуальны после сдвига (вместе с учениеками)
1. Интеграция с Mailgun (именно Mailgun потому что в нём есть квота бесплатных писем, может быть актуально для школ, у которых ет н аэто бюджета (видимо, всех государственных)
1. Ролевая модель:
    1. Администратор может     
        1. создавать и удалять пользователей, 
        1. редактировать их профили, 
        1. переводить учеников между классами и удалять их, 
        1. создавать новые классы и группы, 
    1. Редактор может составлять и отправлять письма

## TBD

1. [x] Создание групп 
1. [ ] Добавление и удаление туда учеников

## Настройка

Базовая настройка осуществляется в файле `conf/application.conf`.

```
db {
    url="jdbc:postgresql://localhost/crm" #JDBC url
    user="crm"
    password="crm"
}
application {
    secret="ZJPmn1iw0a7RQ8hot45KlWF/DHs3rK42m/wG0iw1bFIlzTkmTw0KRo26Lceh" # Ключ, с которым шифруется Cookie приложения
    securePort = 8443 #Порт, на котором поднимается https https версия приложения
    dateFormat = "dd/MM/yyyy" #Формат даты
}
server.http2.enabled = true
crm {
    allowedDegrees = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11] # Разрешённые номера классов
    allowedLetter  = ["А", "Б", "В", "Г", "Д"] # Разрешённые буквы классов
}
mailgun {
    key = "secret-key" # Секретный ключ, с которым мы обращаемся в mailgun
}
flash.cookie {
    name = "flash"
}
```

Логгирование настраивается в `conf/logback.xml` так, как описано [тут](https://logback.qos.ch/manual/configuration.html)
